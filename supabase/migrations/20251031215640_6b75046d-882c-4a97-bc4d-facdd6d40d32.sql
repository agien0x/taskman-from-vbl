-- Создаем задачу "Баги" если её нет
INSERT INTO tasks (id, title, column_id, content, is_root, task_type)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'Баги',
  'todo',
  'Корневая задача для всех багов в системе',
  true,
  'task'
)
ON CONFLICT (id) DO NOTHING;

-- Создаем агента "Редактор" если его нет
INSERT INTO agents (id, name, model, prompt)
VALUES (
  '11111111-1111-1111-1111-111111111111',
  'Редактор',
  'google/gemini-2.5-flash',
  'Ты - опытный редактор текста. Твоя задача - улучшить текст задачи, сделать его четким, структурированным и понятным. Исправь орфографические и грамматические ошибки, улучши формулировки, добавь структуру если нужно. Верни результат в формате JSON с полями title (заголовок задачи, макс 50 символов) и content (описание задачи).'
)
ON CONFLICT (id) DO NOTHING;

-- Создаем агента "Структуратор"
INSERT INTO agents (id, name, model, prompt)
VALUES (
  '22222222-2222-2222-2222-222222222222',
  'Структуратор',
  'google/gemini-2.5-flash',
  'Ты - агент-структуратор задач. Твоя задача:
1. Определить тип задачи (bug, feature, task)
2. Проанализировать её суть и определить связи с существующими задачами
3. Предложить родительские задачи (паренты) и подзадачи
4. Объяснить свое решение

Верни результат в виде комментария, который содержит:
- Тип задачи
- Предложенные связи (паренты и подзадачи с их ID)
- Обоснование твоего решения

Для багов обязательно предлагай добавить в паренты задачу "Баги" (ID: 00000000-0000-0000-0000-000000000001) и задачу, которая соответствует сути бага.'
)
ON CONFLICT (id) DO NOTHING;